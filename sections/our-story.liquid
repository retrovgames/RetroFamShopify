<link rel="stylesheet" href="{{ 'about.css' | asset_url }}">

<section 
  class="our-story-section"
  style="max-width:{{ section.settings.max_width }}px;margin:0 auto;padding-bottom:{{ section.settings.padding_bottom }}px;"
>
  <div class="story-container" style="cursor:pointer;">
    <div class="story-top" style="position:relative;overflow:hidden;">
      {% if section.settings.story_top_img != blank %}
        <img src="{{ section.settings.story_top_img | img_url: 'master' }}" 
             alt="Our Story Top" 
             width="800"
             height="148"
             class="story-bg-image" 
             style="width:100%;height:148px;object-fit:cover;"
             loading="lazy">
      {% endif %}
      <div class="story-text" style="z-index:2;font-size:{{ section.settings.heading_size }}px;color:{{ section.settings.heading_color }};">{{ section.settings.heading_top }}</div>
    </div>
    <div class="story-content" style="height:0;overflow:hidden;transition:height 0.7s ease;position:relative;">
      {% if section.settings.story_content_bg != blank %}
        <img src="{{ section.settings.story_content_bg | img_url: 'master' }}" 
             alt="Our Story Content" 
             width="800"
             height="400"
             class="story-content-bg" 
             style="width:100%;height:100%;position:absolute;top:0;left:0;object-fit:cover;z-index:1;opacity:0.9;"
             loading="lazy">
      {% endif %}
      <div class="story-text-content" style="position:relative;z-index:2;padding:40px 20px;min-height:120px;display:flex;flex-direction:column;justify-content:center;text-align:center;">
        {% for block in section.blocks %}
          <p style="margin:0px 40px 20px 40px;color:{{ section.settings.text_color }};">{{ block.settings.paragraph }}</p>
        {% endfor %}
      </div>
    </div>
    <div class="story-bottom" style="position:relative;overflow:hidden;margin-top:-6px;">
      {% if section.settings.story_bottom_img != blank %}
        <img src="{{ section.settings.story_bottom_img | img_url: 'master' }}" 
             alt="Our Story Bottom" 
             width="800"
             height="148"
             class="story-bg-image" 
             style="width:100%;height:148px;object-fit:cover;"
             loading="lazy">
      {% endif %}
      <div class="story-text" style="z-index:2;font-size:{{ section.settings.heading_size }}px;color:{{ section.settings.heading_color }};">{{ section.settings.heading_bottom }}</div>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var container = document.querySelector('.story-container');
  var content = document.querySelector('.story-content');
  if(container && content) {
    container.addEventListener('mouseenter', function() {
      content.style.height = '380px';
    });
    container.addEventListener('mouseleave', function() {
      content.style.height = '0';
    });
    // Show content by default on mobile (touch) for usability
    if (window.innerWidth < 800) {
      content.style.height = 'auto';
    }
  }
});
</script>

{% schema %}
{
  "name": "Our Story",
  "settings": [
    {
      "type": "image_picker",
      "id": "story_top_img",
      "label": "Top Image"
    },
    {
      "type": "image_picker",
      "id": "story_bottom_img",
      "label": "Bottom Image"
    },
    {
      "type": "image_picker",
      "id": "story_content_bg",
      "label": "Content Background Image"
    },
    {
      "type": "text",
      "id": "heading_top",
      "label": "Top Heading Text",
      "default": "Our"
    },
    {
      "type": "text",
      "id": "heading_bottom",
      "label": "Bottom Heading Text",
      "default": "Story"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#080707"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 18,
      "max": 54,
      "step": 2,
      "label": "Heading Font Size (px)",
      "default": 24
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Paragraph Text Color",
      "default": "#080707"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 600,
      "max": 1400,
      "step": 20,
      "label": "Max Width (px)",
      "default": 900
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 10,
      "label": "Bottom Padding (px)",
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "paragraph",
      "name": "Paragraph",
      "settings": [
        {
          "type": "textarea",
          "id": "paragraph",
          "label": "Paragraph",
          "default": "Retro Fam began as a forumâ€” for retro gaming enthusiasts sharing memories, tips, and repair guide lists. From that passion grew something bigger: a mission to make retro gaming accessible to all and keeping it alive for future generations."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Our Story",
      "category": "About Sections"
    }
  ]
}
{% endschema %}
