<style>
.review-marquee-columns-wrapper {
  position: relative;
  height: 800px;
  overflow: hidden;
}

.gradient-overlay {
  position: absolute;
  left: 0;
  width: 100%;
  height: 300px;
  z-index: 2;
  pointer-events: none;
}

.gradient-overlay.top {
  top: 0;
  background: linear-gradient(to bottom, white 0%, transparent 100%);
}

.gradient-overlay.bottom {
  bottom: 0;
  background: linear-gradient(to top, white 0%, transparent 100%);
}
.review-columns-section {
  text-align: center;
  margin: 140px auto;
}

.review-title {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 60px;
}

.review-marquee-columns {
  height: 800px;
  overflow: hidden;
  position: relative;
}

.review-track-columns {
  columns: 4; /* max 4 columns */
  column-gap: 20px;
  animation: scrollUpColumns 60s linear infinite;
}

.review-card {
  display: inline-block;
  width: 100%;
  background: #fff;
  border: 1px solid #ddd;
  padding: 20px;
  border: 2px solid #080707;
  box-shadow: 5px 5px #080707;
  margin-bottom: 20px;
}

.review-content {
  margin-bottom: 30px;
  color: #080707;
  font-size: 14px;
  line-height: 22px;
  text-align: left;
}

.review-footer {
  display: flex;
  align-items: center;
  gap: 10px;
}

.review-footer img {
  width: 50px;
  height: 50px;
  border-radius: 100%;
  object-fit: cover;
}

.review-footer .start-container img {
  width: 16px;
  height: 16px;
}

.reviewer-info {
  text-align: left;
  font-size: 16px;
  color: #080707CC;
}

.reviewer-info .start-container {
  font-size: 14px;
  font-weight: 700;
}

.alh-verified_buyer {
  color: #000000CC;
  font-size: 14px;
  line-height: 22px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  margin-top: 15px;
}

.alh-verified_buyer p {
  margin: 0;
}

@keyframes scrollUpColumns {
  0%   { transform: translateY(0); }
  100% { transform: translateY(-50%); }
}

/* Responsive */
@media screen and (max-width: 1024px) {
  .review-track-columns {
    columns: 2;
  }
}

@media screen and (max-width: 480px) {
  .review-track-columns {
    columns: 1;
  }
  .review-title {
    font-size: 24px;
    margin-bottom: 15px;
    line-height: 32px;
    max-width: 80%;
    margin-left: auto;
    margin-right: auto;
  }
}

.review-columns_mob {
  display: none;
}

@media screen and (max-width: 767px) {
  .review-columns_mob {
    display: block;
  }
  .review-marquee-columns-wrapper {
    display: none;
  }
}

</style>


<div class="review-columns-section review-columns_desk page-width">
  <h2 class="review-title">{{ section.settings.heading }}</h2>
  <div class="review-marquee-columns-wrapper">
    <!-- gradient top -->
    <div class="gradient-overlay top"></div>
    <div class="review-marquee-columns">
      <div class="review-track-columns">
        {% for i in (1..2) %}
          {% for block in section.blocks %}
            <div class="review-card">
              <div class="review-content">
                <p>{{ block.settings.review_text }}</p>
              </div>
              <div class="review-footer">
                {% if block.settings.reviewer_image %}
                  <img src="{{ block.settings.reviewer_image | image_url: width: 50 }}" alt="Reviewer image">
                {% endif %}
                <div class="reviewer-info">
                  <strong>{{ block.settings.reviewer_name }}</strong><br>
                  <div class="start-container">
                    {% for i in (1..5) %}
                      <img src="{{ 'tabler_star-filled.svg' | asset_url }}" alt="Email icon" height="16" width="16">
                    {% endfor %}
                    {{ block.settings.reviewer_rating }}
                  </div>
                </div>
              </div>
              <div class="alh-verified_buyer">
                <img src="{{ 'SealCheck.svg' | asset_url }}" alt="Verified icon" height="16" width="16">
                <p>Verified Buyer</p>
              </div>
            </div>
          {% endfor %}
        {% endfor %}
      </div>
    </div>
    <!-- gradient bottom -->
    <div class="gradient-overlay bottom"></div>
  </div>
</div>

<div class="review-columns_mob">
  <div class="page-width">
    <div class="swiper review-slider">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="swiper-slide">
            <div class="review-card review-card_mob">
              <div class="review-content">
                <p>{{ block.settings.review_text }}</p>
              </div>
              <div class="review-footer">
                {% if block.settings.reviewer_image %}
                  <img src="{{ block.settings.reviewer_image | image_url: width: 50 }}" alt="Reviewer image">
                {% endif %}
                <div class="reviewer-info">
                  <strong>{{ block.settings.reviewer_name }}</strong><br>
                  <div class="start-container">
                    {% for i in (1..5) %}
                      <img src="{{ 'tabler_star-filled.svg' | asset_url }}" alt="Email icon" height="16" width="16">
                    {% endfor %}
                    {{ block.settings.reviewer_rating }}
                  </div>
                </div>
              </div>
              <div class="alh-verified_buyer">
                <img src="{{ 'SealCheck.svg' | asset_url }}" alt="Verified icon" height="16" width="16">
                <p>Verified Buyer</p>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
  </div>
</div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const reviewSwiper = new Swiper('.review-slider', {
      loop: true,
      spaceBetween: 10,
      centeredSlides: true,
      slidesPerView: 1.3
    });

    function equalizeTestimonialHeights() {
      const slides = document.querySelectorAll('.review-card_mob');
      let maxHeight = 0;
      // Reset height
      slides.forEach(slide => {
        slide.style.height = 'auto';
      });
      // Calculate max height
      slides.forEach(slide => {
        const height = slide.offsetHeight;
        if (height > maxHeight) maxHeight = height;
      });
      // Apply max height to all
      slides.forEach(slide => {
        slide.style.height = maxHeight + 'px';
      });
    }
    // Run on load and resize
    window.addEventListener('load', equalizeTestimonialHeights);
    window.addEventListener('resize', equalizeTestimonialHeights);
    // Optional: run after a small delay if images are inside
    setTimeout(equalizeTestimonialHeights, 500);




  });
</script>


{% schema %}
{
  "name": "Scrolling Review Grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "See What Our Customers Say"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text",
          "default": "This product is amazing! Totally changed my routine."
        },
        {
          "type": "text",
          "id": "reviewer_rating",
          "label": "Rating",
          "default": "4.9"
        },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reviewer Name",
          "default": "John D."
        },
        {
          "type": "image_picker",
          "id": "reviewer_image",
          "label": "Reviewer Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Scrolling Review Grid",
      "blocks": [
        { "type": "review" },
        { "type": "review" },
        { "type": "review" },
        { "type": "review" },
        { "type": "review" },
        { "type": "review" },
        { "type": "review" },
        { "type": "review" }
      ]
    }
  ]
}
{% endschema %}
